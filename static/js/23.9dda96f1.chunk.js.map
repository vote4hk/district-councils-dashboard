{"version":3,"sources":["utils/helper.js","queries/gql.js","components/atoms/Columns.js","constants/dcregion.js","components/atoms/Link.js","components/atoms/Avatar.js","components/atoms/Tooltip.js","components/atoms/Tag.js","components/atoms/Rows.js","components/atoms/Loading.js","components/containers/CandidatesContainer.js","components/organisms/ConstituencyCard.js","components/pages/district/list.js"],"names":["getDistrictListUriFromTag","tag","currentLanguage","getCurrentLanguage","concat","getDistrictOverviewUriFromTag","code","getConstituencyUriFromTag","getCodeFromDistrictName","name","Object","keys","DCREGION","forEach","k","zh_hk","getCouncillorMeta","councillor","result","participatedOrdinary","participatedByElection","lastParticipated","year","type","votesDiff","votes","isWon","participatedElections","person","candidates","filter","c","election_type","length","e","electionYear","myVotes","constituency","find","id","highestVotes","map","reduce","v","Math","max","is_won","getColorFromCamp","camp","泛民","民主","建制","本土","傘兵","自決","其他","不明","getColorFromPoliticalAffiliation","pa","mapping","democracy","establishment","localist","other","_arr","_i","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","party","value","includes","err","return","getProfilePath","name_en","name_zh","uuid","formatNumber","num","toString","replace","getParameterByName","url","window","location","href","results","RegExp","exec","decodeURIComponent","getCurrentUrl","getConstituencyTagsByCandidateCamps","tags","filteredCandidates","nominate_status","findIndex","push","withLanguage","groupedCamps","_","groupBy","lang","pathname","match","i18n","language","localStorage","i18nextLng","geti18nFromCamp","isShortForm","arguments","suffix","groupVoteStat","voteStats","data","stat","subtype","aggregations","all_voters","VOTERS","count","new_voters","NEW_VOTERS","computeTurnouts","constituencies","turnouts","govData","isEmpty","constituencyTurnouts","get","turnoutIndex","findLastIndex","t","now","Date","_home_travis_build_vote4hk_district_councils_dashboard_web_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","total","vote_stats","current","updateTime","setHours","districtTurnouts","district","dc_code","dt","districtTotalFromGov","maxBy","d","totalTurnout","totalFromGov","turnout","percentage","toLocaleTimeString","navigator","hour","minute","sort","a","b","getDistrictTurnouts","getConstituencyTurnouts","districtCode","customVoteStationMapping","station_code","M3901","CONSTITUENCIES_DATA","DISTRICT_DATA","QUERY_CONSTITUENCIES","gql","_templateObject","QUERY_GET_CANDIDATES_BY_IDS","_templateObject2","QUERY_GET_CONSTITUENCIES_BY_DISTRICT_CODES","_templateObject3","QUERY_GET_CONSTITUENCIES_BY_TAG","_templateObject4","QUERY_CONSTITUENCY_STATS","_templateObject5","QUERY_GET_ALL_DISTRICTS","_templateObject6","_templateObject7","QUERY_GET_AREA","_templateObject8","QUERY_GET_PERSON_ELECTIONS","_templateObject9","QUERY_GET_PERSON_MEETING_ATTENDANCES","_templateObject10","QUERY_GET_COUNCILLOR","_templateObject11","QUERY_GET_CANDIDATES","_templateObject12","QUERY_GET_NOMINATION_SUMMARY","_templateObject13","_templateObject14","_templateObject15","styled","Box","SeperatedColumns","__webpack_require__","__webpack_exports__","A","en_us","unelected_dc_seat","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","UnstyledLink","Link","UnstyledNavLink","NavLink","DefaultLink","COLORS","main","primary","PeopleAvatar","Avatar","props","opacity","dimension","borderwidth","background","InfoIconSvg","InfoIcon","size","ErrorIconSvg","ErrorIcon","HtmlTooltip","react__WEBPACK_IMPORTED_MODULE_2___default","createElement","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_3__","assign","className","classes","popper","tooltip","title","Fragment","dangerouslySetInnerHTML","__html","text","onClick","evt","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","StyledChip","Chip","fontsize","backgroundcolor","textcolor","bordercolor","SecondaryStyledChip","Tag","react__WEBPACK_IMPORTED_MODULE_3___default","fontSize","label","handleClick","icon","SecondaryTag","Placeholder","div","CentredCircularProgress","CircularProgress","Loading","react__WEBPACK_IMPORTED_MODULE_1___default","thickness","color","CandidateList","Grid","CandidateGrid","DCCAStatusTagsContainer","StyledTag","StyledSecondaryTag","Candidate","CandidateNumber","WinIndicator","ControversialAlert","CandidateName","Typography","CandidatesContainer","election_forum","useTranslation","_useState","useState","_useState2","_home_travis_build_vote4hk_district_councils_dashboard_web_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","imageLoadError","setImageLoadError","react_apollo__WEBPACK_IMPORTED_MODULE_3__","query","variables","_ref","loading","error","dcd_candidates","components_atoms_Rows__WEBPACK_IMPORTED_MODULE_8__","index","key","forum","_material_ui_icons_OndemandVideo__WEBPACK_IMPORTED_MODULE_19___default","n","fireEvent","ca","ac","lb","open","components_atoms_Columns__WEBPACK_IMPORTED_MODULE_9__","container","direction","candidate","item","xs","sm","md","components_atoms_Link__WEBPACK_IMPORTED_MODULE_6__","to","components_atoms_Avatar__WEBPACK_IMPORTED_MODULE_5__","src","process","imgProps","onError","target","IMAGE_HOST_URI","candidate_number","_material_ui_icons_CheckCircleOutline__WEBPACK_IMPORTED_MODULE_20___default","components_atoms_Tooltip__WEBPACK_IMPORTED_MODULE_10__","disableFocusListener","disableTouchListener","placement","variant","_material_ui_core__WEBPACK_IMPORTED_MODULE_13__","political_affiliation_en","political_affiliation_zh","propsType","StyledCard","Card","TagContainer","withRouter","sortedTags","react_default","history","gutterBottom","Columns","Container","Paper","list_templateObject","DistrictListPage","_props$match$params","params","react_apollo_esm","dcd_constituencies","organisms_ConstituencyCard"],"mappings":"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","file":"static/js/23.9dda96f1.chunk.js","sourcesContent":["import { DCREGION } from 'constants/dcregion'\nimport _ from 'lodash'\nimport i18n from 'i18n'\n\nexport const getDistrictListUriFromTag = tag => {\n  const currentLanguage = getCurrentLanguage()\n  return `/${currentLanguage}/district/2019/tags/${tag}`\n}\n\nexport const getDistrictOverviewUriFromTag = code => {\n  const currentLanguage = getCurrentLanguage()\n  return `/${currentLanguage}/district/2019/${code}`\n}\n\nexport const getConstituencyUriFromTag = code => {\n  const currentLanguage = getCurrentLanguage()\n  return `/${currentLanguage}/district/2019/${code}`\n}\n\nexport const getCodeFromDistrictName = name => {\n  let code = 'A'\n  Object.keys(DCREGION).forEach(k => {\n    if (DCREGION[k].zh_hk === name) {\n      code = k\n    }\n  })\n  return code\n}\n\n/**\n * Passing a councillor object and get the meta data for it\n * (By QUERY_GET_COUNCILLOR_AND_CANDIDATES query)\n */\nexport const getCouncillorMeta = councillor => {\n  const result = {\n    participatedOrdinary: 0,\n    participatedByElection: 0,\n    lastParticipated: {\n      year: 2019,\n      type: 'ordinary',\n      votesDiff: 0,\n      votes: 0,\n      isWon: false,\n    },\n  }\n\n  // should already sorted from query\n  const participatedElections = councillor.person.candidates || []\n  result.participatedByElection = participatedElections.filter(\n    c => c.election_type === 'by-election'\n  ).length\n  result.participatedOrdinary = participatedElections.filter(\n    c => c.election_type === 'ordinary'\n  ).length\n\n  if (participatedElections.length > 0) {\n    // Filter out 2019 result\n    const e = participatedElections.filter(\n      e => !(e.year === 2019 && e.election_type === 'ordinary')\n    )[0]\n    const electionYear = e.year\n\n    const myVotes = e.constituency.candidates.find(\n      c => c.person.id === councillor.person.id && c.year === electionYear\n    ).votes\n    const highestVotes = e.constituency.candidates\n      .filter(\n        c => c.person.id !== councillor.person.id && c.year === electionYear\n      )\n      .map(c => c.votes)\n      .reduce((c, v) => Math.max(c, v), 0)\n    result.lastParticipated = {\n      year: e.year,\n      isWon: e.is_won,\n      votesDiff: myVotes - highestVotes,\n      votes: myVotes,\n      type: e.election_type,\n    }\n  }\n  return result\n}\n\nexport const getColorFromCamp = camp => {\n  if (!camp) return 'uncertain'\n  const mapping = {\n    泛民: 'democracy',\n    民主: 'democracy',\n    建制: 'establishment',\n    本土: 'localist',\n    傘兵: 'localist',\n    自決: 'localist',\n    其他: 'other',\n    不明: 'uncertain',\n  }\n\n  return mapping[camp] || 'uncertain'\n}\n\nexport const getColorFromPoliticalAffiliation = pa => {\n  if (!pa) return 'uncertain'\n\n  const mapping = {\n    democracy: [\n      '民主黨',\n      '公民黨',\n      '香港民主民生協進會',\n      '民協',\n      '社會民主連線',\n      '支聯會',\n      '民主動力',\n      '街坊工友服務處',\n      '街工',\n      '工黨',\n      '職工盟',\n      '新民主同盟',\n      '香港本土',\n      '獨立民主派',\n    ],\n    establishment: [\n      '民主建港協進聯盟',\n      '民建聯',\n      '新界社團聯會',\n      '新社聯',\n      '香港工會聯合會',\n      '工聯會',\n      '港九勞工社團聯會',\n      '香港經濟民生聯盟',\n      '西九新動力',\n      '自由黨',\n      '新民黨',\n      '新世紀論壇',\n    ],\n    localist: [\n      '香港眾志',\n      '青年新政',\n      '本土民主前線',\n      '東九龍社區關注組',\n      '天水圍民生關注平台',\n      '慈雲山建設力量',\n      '屯門社區關注組',\n      '長沙灣社區發展力量',\n      '社區網絡聯盟',\n      '沙田社區網絡',\n      '荃灣社區網絡',\n      '天水圍社區發展網絡',\n      '屯門社區網絡',\n      '葵青連結動力',\n      '藍田社區網絡',\n      '埔向晴天',\n      '荃灣民生動力',\n      '北區動源',\n      '維多利亞社區協會',\n    ],\n    other: ['民主思路', '新思維'],\n  }\n\n  for (let camp of Object.keys(mapping)) {\n    for (let party of mapping[camp]) {\n      if (pa.includes(party)) {\n        return camp\n      }\n    }\n  }\n\n  return 'uncertain'\n}\n\nexport const getProfilePath = person => {\n  const { name_en, name_zh, uuid } = person\n  const currentLanguage = getCurrentLanguage()\n  return `/${currentLanguage}/profile/${name_zh || name_en}/${uuid}`\n}\n\nexport const formatNumber = num =>\n  num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\n\nexport const getParameterByName = (name, url) => {\n  if (!url) url = window.location.href\n  name = name.replace(/[[\\]]/g, '\\\\$&')\n  const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n    results = regex.exec(url)\n  if (!results) return null\n  if (!results[2]) return ''\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\nexport const getCurrentUrl = () => {\n  return window.location.href\n}\n\nexport const getConstituencyTagsByCandidateCamps = candidates => {\n  const tags = []\n  const filteredCandidates = candidates.filter(\n    c =>\n      c.election_type === 'ordinary' &&\n      c.nominate_status === 'confirmed' &&\n      c.tags.findIndex(\n        tag => tag.type === 'demo_status' && tag.tag === 'planb'\n      ) === -1\n  )\n\n  if (filteredCandidates.length >= 3) {\n    tags.push(withLanguage('Multiple candidates', '多人混戰'))\n  }\n\n  const groupedCamps = _.groupBy(filteredCandidates, c => c.camp)\n  if (groupedCamps['民主'] && groupedCamps['民主'].length > 1) {\n    tags.push(withLanguage('Multiple Pan-dem. candidates', '民主撞區'))\n  }\n\n  if (groupedCamps['建制'] && groupedCamps['建制'].length > 1) {\n    tags.push(withLanguage('Multiple Pro-Est. candidates', '建制撞區'))\n  }\n\n  return tags\n}\n\nexport const withLanguage = (name_en, name_zh) => {\n  var lang = window.location.pathname.match(/^\\/([\\w]{2})\\//)\n  lang = lang ? lang[1] : 'zh'\n  return lang === 'en' && name_en ? name_en : name_zh\n}\n\nexport const getCurrentLanguage = () => {\n  return i18n.language || window.localStorage.i18nextLng || 'zh'\n}\n\nexport const geti18nFromCamp = (camp, isShortForm = false) => {\n  if (!camp) return camp\n\n  const suffix = isShortForm ? '_short_form' : ''\n  const mapping = {\n    民主: `camp.democracy${suffix}`,\n    建制: `camp.establishment${suffix}`,\n    其他: `camp.others${suffix}`,\n  }\n\n  if (!mapping[camp]) return camp\n  return mapping[camp]\n}\n\nexport const groupVoteStat = voteStats => {\n  const data = _.groupBy(voteStats, stat => stat.subtype)\n  data.aggregations = {\n    all_voters: data.VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n    new_voters: data.NEW_VOTERS.map(v => v.count).reduce((c, v) => c + v, 0),\n  }\n  return data\n}\n\nexport const computeTurnouts = (constituencies, turnouts, govData) => {\n  if (_.isEmpty(constituencies) || _.isEmpty(turnouts)) {\n    return []\n  }\n\n  const constituencyTurnouts = constituencies.map(constituency => {\n    const constituencyTurnouts = _.get(\n      turnouts,\n      `${constituency.code}.cumulativeTurnout`,\n      []\n    )\n    const turnoutIndex = _.findLastIndex(constituencyTurnouts, t => t !== null)\n    const now = new Date()\n\n    return {\n      ...constituency,\n      total: _.get(\n        groupVoteStat(constituency.vote_stats),\n        'aggregations.all_voters',\n        0\n      ),\n      type: 'constituency',\n      current: turnoutIndex >= 0 ? constituencyTurnouts[turnoutIndex] : 0,\n      // hourly from 07:30\n      updateTime: new Date(now.setHours(8 + (turnoutIndex || 0), 30)),\n      url: `district/2019/${constituency.code}`,\n    }\n  })\n\n  const districtTurnouts = _.map(\n    _.groupBy(constituencyTurnouts, 'district.dc_code'),\n    value => {\n      return value.reduce((c, v) => {\n        return c === null\n          ? v\n          : {\n              ...v.district,\n              current: c.current + v.current,\n              total: c.total + v.total,\n              updateTime:\n                c.updateTime > v.updateTime ? c.updateTime : v.updateTime,\n              type: 'district',\n              url: `district/2019/${v.district.dc_code}`,\n            }\n      }, null)\n    }\n  )\n\n  // overwrite data from gov\n  districtTurnouts.forEach(dt => {\n    const districtTotalFromGov = _.maxBy(\n      _.get(govData, `${dt.dc_code}`, []),\n      d => d || 0\n    )\n    if (dt.current < districtTotalFromGov) {\n      dt.current = districtTotalFromGov\n    }\n  })\n\n  const totalTurnout = districtTurnouts.reduce((c, v) => {\n    return c === null\n      ? v\n      : {\n          current: c.current + v.current,\n          total: c.total + v.total,\n          updateTime: c.updateTime > v.updateTime ? c.updateTime : v.updateTime,\n          type: 'all',\n          url: null,\n        }\n  }, null)\n  const totalFromGov = _.maxBy(_.get(govData, 'total', []), d => d || 0)\n  if (totalTurnout.current < totalFromGov) {\n    totalTurnout.current = totalFromGov\n  }\n\n  return constituencyTurnouts\n    .concat(districtTurnouts)\n    .concat([totalTurnout])\n    .map(turnout => {\n      return {\n        ...turnout,\n        percentage:\n          (turnout.current > 0 ? turnout.current / turnout.total : 0) * 100,\n        updateTime: turnout.updateTime.toLocaleTimeString(navigator.language, {\n          hour: '2-digit',\n          minute: '2-digit',\n        }),\n      }\n    })\n    .sort((a, b) => a.percentage - b.percentage)\n}\n\nexport const getDistrictTurnouts = (constituencies, turnouts, govData) => {\n  return computeTurnouts(constituencies, turnouts, govData).filter(\n    t => t.type === 'district' || t.type === 'all'\n  )\n}\n\nexport const getConstituencyTurnouts = (\n  constituencies,\n  turnouts,\n  govData,\n  districtCode\n) => {\n  return computeTurnouts(constituencies, turnouts, govData).filter(\n    t =>\n      (t.type === 'constituency' && t.district.dc_code === districtCode) ||\n      (t.type === 'district' && t.dc_code === districtCode) ||\n      t.type === 'all'\n  )\n}\n\nexport const customVoteStationMapping = station_code => {\n  const mapping = {\n    M3901: '22.427643,114.071966',\n  }\n  if (mapping[station_code]) return mapping[station_code]\n  return null\n}\n","// TODO: split this\nimport gql from 'graphql-tag'\n\nconst CONSTITUENCIES_DATA = `\nid\nname_zh\nname_en\ndistrict {\n  dc_code\n  dc_name_en\n  dc_name_zh\n  area_name_en\n  area_name_zh\n}\ncode\ndeviation_percentage\nexpected_population\nmain_areas\ndescription_zh\ndescription_en\nvote_stats {\n  count\n  type\n  subtype\n  category_1\n  category_2\n}\nstations {\n  station_code\n  name_en\n  name_zh\n  location\n}\ntags {\n  tag\n  type\n}\nmeta\ncandidates_aggregate {\n  aggregate {\n    count(columns: is_won, distinct: true)\n  }\n}\n`\n\nexport const DISTRICT_DATA = `\narea_code\narea_name_zh\narea_name_en\ndc_code\ndc_name_zh\ndc_name_en\ndc_description_zh\nconstituencies( where: { year: { _eq: $year } }, order_by: {code: asc} ) {\n  id\n  name_zh\n  name_en\n  code\n  candidates( where: { year: { _eq: $year } }, order_by: {candidate_number: asc} ) {\n    candidate_number\n    is_won\n    votes\n    political_affiliation\n    political_affiliation_zh\n    political_affiliation_en\n    election_type\n    camp\n    person {\n      id\n      uuid\n      name_zh\n      name_en\n      related_organization_en\n      related_organization_zh\n    }\n    nominate_status\n    tags {\n      tag\n      type\n    }\n  }\n}\n`\n\nexport const QUERY_CONSTITUENCIES = gql`\nquery($year: Int!, $code: String!, $stationPattern: String) {\n  dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n    ${CONSTITUENCIES_DATA}\n    predecessors {\n      intersect_area\n      predecessor {\n        ${CONSTITUENCIES_DATA}\n      }\n    }\n  }\n  dcd_constituency_vote_stations (\n    where: {\n      station_code: {_like:$stationPattern}, \n      year:{_eq:$year}},    \n  ){\n    station_code\n    name_en\n    name_zh\n    address_en\n    address_zh\n    location\n    }  \n}\n`\n\nexport const QUERY_GET_CANDIDATES_BY_IDS = gql`\n  query($year: Int!, $person_id: [Int!]) {\n    dcd_constituencies(\n      where: {\n        year: { _eq: $year }\n        candidates: { person: { id: { _in: $person_id } } }\n      }\n      order_by: { code: asc }\n    ) {\n      id\n      name_zh\n      name_en\n      code\n      candidates(\n        where: { year: { _eq: $year }, person: { id: { _in: $person_id } } }\n        order_by: { candidate_number: asc }\n      ) {\n        candidate_number\n        is_won\n        votes\n        political_affiliation\n        political_affiliation_zh\n        political_affiliation_en\n        election_type\n        camp\n        person {\n          id\n          uuid\n          name_zh\n          name_en\n          related_organization\n        }\n        nominate_status\n        tags {\n          tag\n          type\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_DISTRICT_CODES = gql`\n  query($year: Int!, $dc: [String!]) {\n    dcd_constituencies(\n      where: { year: { _eq: $year }, code: { _in: $dc } }\n      order_by: { code: asc }\n    ) {\n      id\n      name_zh\n      name_en\n      code\n      candidates(\n        where: { year: { _eq: $year } }\n        order_by: { candidate_number: asc }\n      ) {\n        candidate_number\n        is_won\n        votes\n        political_affiliation\n        political_affiliation_zh\n        political_affiliation_en\n        election_type\n        camp\n        person {\n          id\n          uuid\n          name_zh\n          name_en\n          related_organization\n        }\n        nominate_status\n        tags {\n          tag\n          type\n        }\n      }\n      candidates_aggregate {\n        aggregate {\n          count(columns: is_won, distinct: true)\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONSTITUENCIES_BY_TAG = gql`\nquery($year: Int!, $tag: String!) {\n  dcd_constituencies(\n    where: { year: { _eq: $year }, tags: { tag: {_eq: $tag} } }\n    order_by: {code: asc }\n  ) {\n    ${CONSTITUENCIES_DATA}\n  }  \n}\n`\n\nexport const QUERY_CONSTITUENCY_STATS = gql`\n  query($year: Int!, $code: String!) {\n    dcd_constituencies(where: { year: { _eq: $year }, code: { _eq: $code } }) {\n      vote_stats {\n        count\n        type\n        subtype\n        category_1\n        category_2\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_DISTRICT = gql`\n  query($year: Int!, $code: String!) {\n    dcd_districts( where: { dc_code: { _eq: $code} } ) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_ALL_DISTRICTS = gql`\n  query($year: Int!) {\n    dcd_districts(order_by: {dc_code: asc}) {\n      ${DISTRICT_DATA}\n    }\n  }\n`\n\nexport const QUERY_GET_AREA = gql`\n  query {\n    dcd_districts {\n      area_code\n      area_name_en\n      area_name_zh\n      dc_code\n      dc_name_en\n      dc_name_zh\n      constituencies(where: { year: { _eq: 2019 } }) {\n        code\n        name_zh\n        name_en\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_ELECTIONS = gql`\n  query get_person_elections($person_id: Int!) {\n    dcd_people_by_pk(id: $person_id) {\n      candidates(order_by: { year: desc }) {\n        year\n        constituency {\n          name_zh\n          name_en\n          code\n        }\n        election_type\n        camp\n        political_affiliation\n        political_affiliation_zh\n        political_affiliation_en\n        votes\n        is_won\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_PERSON_MEETING_ATTENDANCES = gql`\n  query get_meeting_attendance($person_id: Int!) {\n    dcd_councillors(where: { person: { id: { _eq: $person_id } } }) {\n      year\n      cacode\n      term_from\n      term_to\n      career\n      district {\n        dc_name_zh\n      }\n      political_affiliation\n      post\n      constituency {\n        id\n        name_zh\n      }\n      meeting_attendances(\n        order_by: { meeting: { meet_year: desc }, total: desc }\n      ) {\n        meeting {\n          meet_name\n          meet_type\n          meet_year\n        }\n        attended\n        total\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_COUNCILLOR = gql`\n  query fetch_councillors($year: Int!, $code: String!) {\n    dcd_councillors(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { term_to: desc }\n    ) {\n      year\n      term_to\n      term_from\n      political_affiliation\n      constituency {\n        name_zh\n        name_en\n        code\n      }\n      person {\n        id\n        name_en\n        name_zh\n        uuid\n        candidates(order_by: { year: desc }) {\n          votes\n          is_won\n          year\n          cacode\n          election_type\n          constituency {\n            year\n            name_en\n            name_zh\n            candidates {\n              person {\n                id\n                name_en\n                name_zh\n              }\n              year\n              election_type\n              votes\n              political_affiliation\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CANDIDATES = gql`\n  query fetch_candidates($year: Int!, $code: String!) {\n    dcd_candidates(\n      where: { cacode: { _eq: $code }, year: { _eq: $year } }\n      order_by: { candidate_number: asc }\n    ) {\n      candidate_number\n      is_won\n      votes\n      political_affiliation\n      political_affiliation_en\n      political_affiliation_zh\n      election_type\n      camp\n      nominate_status\n      tags {\n        tag\n        type\n      }\n      person {\n        id\n        uuid\n        name_zh\n        name_en\n        related_organization\n        description\n      }\n    }\n  }\n`\n\n// This is a dangerous query.. the data size is huge (for 2019 it is 19MB)\nexport const QUERY_GET_CONSTITUENCY_CAMP_DATA = gql`\n  query fetch_camp_data($year: Int!) {\n    dcd_constituencies(where: { year: { _eq: $year } }) {\n      code\n      predecessors(limit: 1, order_by: { intersect_area: desc }) {\n        predecessor {\n          code\n          candidates {\n            camp\n            votes\n            is_won\n          }\n          vote_stats(where: { subtype: { _eq: \"NEW_VOTERS\" } }) {\n            type\n            subtype\n            category_1\n            category_2\n            count\n          }\n        }\n      }\n      vote_stats {\n        type\n        subtype\n        category_1\n        category_2\n        count\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_NOMINATION_SUMMARY = gql`\n  query {\n    c2019: dcd_constituencies(where: { year: { _eq: 2019 } }) {\n      code\n      name_en\n      name_zh\n      district {\n        dc_code\n        dc_name_en\n        dc_name_zh\n      }\n      candidates {\n        camp\n        nominated_at\n        nominate_status\n        election_type\n        tags {\n          tag\n          type\n        }\n      }\n      tags {\n        tag\n      }\n    }\n\n    c2015: dcd_constituencies(where: { year: { _eq: 2015 } }) {\n      code\n      name_en\n      name_zh\n      candidates {\n        votes\n      }\n      tags {\n        tag\n      }\n    }\n\n    c2015: dcd_constituencies(where: { year: { _eq: 2015 } }) {\n      code\n      name_zh\n      candidates {\n        votes\n      }\n    }\n  }\n`\n\nexport const QUERY_GET_CONFIG = gql`\n  query fetch_config($key: String!) {\n    dcd_config(where: { key: { _eq: $key } }) {\n      value\n    }\n  }\n`\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    align-content: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n\nexport const SeperatedColumns = styled(Box)`\n  && {\n    margin-top: 8px;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n`\n","// deprecated. should use the data from server\nexport const DCREGION = {\n  A: {\n    zh_hk: '中西區',\n    en_us: 'Central and Western',\n    unelected_dc_seat: 0,\n  },\n  B: {\n    zh_hk: '灣仔',\n    en_us: 'Wan Chai',\n    unelected_dc_seat: 0,\n  },\n  C: {\n    zh_hk: '東區',\n    en_us: 'Eastern',\n    unelected_dc_seat: 0,\n  },\n  D: {\n    zh_hk: '南區',\n    en_us: 'Southern',\n    unelected_dc_seat: 0,\n  },\n  E: {\n    zh_hk: '油尖旺',\n    en_us: 'Yau Tsim Mong',\n    unelected_dc_seat: 0,\n  },\n  F: {\n    zh_hk: '深水埗',\n    en_us: 'Sham Shui Po',\n    unelected_dc_seat: 0,\n  },\n  G: {\n    zh_hk: '九龍城',\n    en_us: 'Kowloon City',\n    unelected_dc_seat: 0,\n  },\n  H: {\n    zh_hk: '黃大仙',\n    en_us: 'Wong Tai Sin',\n    unelected_dc_seat: 0,\n  },\n  J: {\n    zh_hk: '觀塘',\n    en_us: 'Kwun Tong',\n    unelected_dc_seat: 0,\n  },\n  K: {\n    zh_hk: '荃灣',\n    en_us: 'Tsuen Wan',\n    unelected_dc_seat: 2,\n  },\n  L: {\n    zh_hk: '屯門',\n    en_us: 'Tuen Mun',\n    unelected_dc_seat: 1,\n  },\n  M: {\n    zh_hk: '元朗',\n    en_us: 'Yuen Long',\n    unelected_dc_seat: 6,\n  },\n  N: {\n    zh_hk: '北區',\n    en_us: 'North',\n    unelected_dc_seat: 4,\n  },\n  P: {\n    zh_hk: '大埔',\n    en_us: 'Tai Po',\n    unelected_dc_seat: 2,\n  },\n  Q: {\n    zh_hk: '西貢',\n    en_us: 'Sai Kung',\n    unelected_dc_seat: 2,\n  },\n  R: {\n    zh_hk: '沙田',\n    en_us: 'Sha Tin',\n    unelected_dc_seat: 1,\n  },\n  S: {\n    zh_hk: '葵青',\n    en_us: 'Kwai Tsing',\n    unelected_dc_seat: 1,\n  },\n  T: {\n    zh_hk: '離島',\n    en_us: 'Islands',\n    unelected_dc_seat: 8,\n  },\n}\n","import styled from 'styled-components'\nimport { NavLink } from 'react-router-dom'\nimport Link from '@material-ui/core/Link'\nimport { COLORS } from 'ui/theme'\n\nexport const UnstyledLink = styled(Link)`\n  text-decoration: unset;\n  color: black;\n  font-style: unset;\n  cursor: pointer;\n`\n\nexport const UnstyledNavLink = styled(NavLink)`\n  text-decoration: unset;\n  color: unset;\n  font-style: unset;\n  cursor: pointer;\n`\nexport const DefaultLink = styled(UnstyledLink)`\n  color: ${COLORS.main.primary};\n  font-weight: 500;\n`\n","import styled from 'styled-components'\nimport Avatar from '@material-ui/core/Avatar'\nimport { COLORS } from 'ui/theme'\n\nexport const PeopleAvatar = styled(Avatar)`\n  && {\n    opacity: ${props => props.opacity};\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    border: ${props => props.borderwidth}px\n      ${props => props.camp && COLORS.camp[props.camp].background} solid;\n  }\n`\n","import styled from 'styled-components'\nimport React from 'react'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport InfoIcon from '@material-ui/icons/InfoOutlined'\nimport ErrorIcon from '@material-ui/icons/ErrorOutline'\nconst InfoIconSvg = styled(InfoIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nconst ErrorIconSvg = styled(ErrorIcon)`\n  && {\n    font-size: ${props => props.size || 16}px;\n    vertical-align: bottom;\n  }\n`\n\nexport const HtmlTooltip = styled(props => (\n  <Tooltip\n    className={props.className}\n    classes={{ popper: props.className, tooltip: 'tooltip' }}\n    title={\n      <>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: props.text,\n          }}\n        />\n      </>\n    }\n    {...props}\n    onClick={evt => {\n      evt.preventDefault()\n      evt.stopPropagation()\n      evt.nativeEvent.stopPropagation()\n      evt.nativeEvent.stopImmediatePropagation()\n    }}\n  >\n    {props.type === 'error' ? (\n      <ErrorIconSvg size={props.size || 16} />\n    ) : (\n      <InfoIconSvg size={props.size || 16} />\n    )}\n  </Tooltip>\n))`\n  & .tooltip {\n    border: 1px solid #000;\n    background-color: #fff;\n    color: #000;\n  }\n  & .MuiTooltip-tooltipPlacementBottom {\n    margin: 5px 0px 0px;\n  }\n`\n","import styled from 'styled-components'\nimport Chip from '@material-ui/core/Chip'\nimport React from 'react'\nimport { COLORS } from 'ui/theme'\n\nconst StyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.backgroundcolor || COLORS.main.primary};\n    color: ${props => props.textcolor || COLORS.main.background};\n    border: ${props => props.borderwidth || 0}px\n      ${props => props.bordercolor || 'rgba(0, 0, 0, 0.5)'} solid;\n    padding: 0 6px 0;\n    svg {\n      fill: ${props => props.textcolor || COLORS.main.background};\n    }\n  }\n`\nconst SecondaryStyledChip = styled(Chip)`\n  && {\n    font-size: ${props => props.fontsize || 12}px;\n    background: ${props => props.textcolor || COLORS.main.background};\n    color: ${props => props.backgroundcolor || COLORS.main.primary};\n    border: ${props => props.borderwidth || 1}px\n      ${props => props.backgroundcolor || COLORS.main.primary} solid;\n  }\n`\n\nexport const Tag = props => {\n  return (\n    <StyledChip\n      fontSize={props.fontsize}\n      textcolor={props.textcolor}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n      className={props.className}\n      icon={props.icon}\n    />\n  )\n}\n\nexport const SecondaryTag = props => {\n  return (\n    <SecondaryStyledChip\n      fontSize={props.fontsize}\n      textcolor={props.textcolor}\n      backgroundcolor={props.backgroundcolor}\n      bordercolor={props.bordercolor}\n      borderwidth={props.borderwidth}\n      label={props.value}\n      size=\"small\"\n      onClick={props.handleClick}\n      className={props.className}\n    />\n  )\n}\n","import styled from 'styled-components'\nimport Box from '@material-ui/core/Box'\n\nexport default styled(Box)`\n  && {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: wrap;\n    align-items: flex-start;\n    width: 100%;\n    margin: auto;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nconst Placeholder = styled.div`\n  && {\n    width: 100%;\n    height: calc(100vh - 56px);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nconst CentredCircularProgress = styled(CircularProgress)`\n  && {\n    max-width: 50%;\n  }\n`\n\nexport const Loading = props => {\n  return (\n    <Placeholder className={props.className}>\n      <CentredCircularProgress thickness={3} size={64} color=\"secondary\" />\n    </Placeholder>\n  )\n}\n","import React, { useState } from 'react'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CANDIDATES } from 'queries/gql'\nimport { PeopleAvatar } from 'components/atoms/Avatar'\nimport { UnstyledNavLink } from 'components/atoms/Link'\nimport { Tag, SecondaryTag } from 'components/atoms/Tag'\nimport Rows from 'components/atoms/Rows'\nimport { SeperatedColumns } from 'components/atoms/Columns'\nimport { HtmlTooltip } from 'components/atoms/Tooltip'\nimport { Box, Typography, Grid } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { fireEvent } from 'utils/ga_fireevent'\nimport { useTranslation } from 'react-i18next'\nimport {\n  getColorFromCamp,\n  getConstituencyTagsByCandidateCamps,\n  withLanguage,\n  getCurrentLanguage,\n} from 'utils/helper'\nimport { COLORS } from 'ui/theme'\nimport OndemandVideoIcon from '@material-ui/icons/OndemandVideo'\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline'\n\nconst IMAGE_HOST_URI =\n  process.env.REACT_APP_HOST_URI || 'https://hkvoteguide.github.io'\n\nconst CandidateList = styled(Grid)`\n  && {\n  }\n`\n\nconst CandidateGrid = styled(Grid)`\n  && {\n    margin-bottom: 8px;\n  }\n`\n\nconst DCCAStatusTagsContainer = styled(SeperatedColumns)`\n  && {\n    justify-content: flex-end;\n    flex-wrap: wrap;\n  }\n`\n\nconst StyledTag = styled(Tag)`\n  && {\n    margin-left: 8px;\n    margin-bottom: 5px;\n  }\n`\n\nconst StyledSecondaryTag = styled(SecondaryTag)`\n  && {\n    margin-left: 8px;\n    margin-bottom: 5px;\n  }\n`\n\nconst Candidate = styled(Box)`\n  && {\n    position: relative;\n    width: auto;\n    text-align: center;\n    & > div {\n      margin: 0 auto;\n    }\n  }\n`\n\nconst CandidateNumber = styled(Box)`\n  && {\n    position: relative;\n    margin-bottom: -18px !important;\n    top: -19px;\n    left: -28px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: ${props => COLORS.camp[props.camp].background};\n    color: ${props => COLORS.camp[props.camp].text};\n    text-align: center;\n  }\n`\nconst WinIndicator = styled(Box)`\n  && {\n    position: relative;\n    margin-bottom: -18px !important;\n    top: -25px;\n    right: -28px;\n    border-radius: 50%;\n    font-weight: 700;\n    width: ${props => props.dimension};\n    height: ${props => props.dimension};\n    background-color: white;\n    text-align: center;\n    padding-top: 1px;\n    padding-left: 0px;\n  }\n`\n\nconst ControversialAlert = styled.div`\n  && {\n    position: relative;\n    margin-bottom: -21px !important;\n    top: -21px;import { Tag } from 'components/atoms/Tag';\n\n    left: 30px;\n  }\n`\nconst CandidateName = styled(Typography)`\n  && {\n    margin-top: 5px;\n    font-weight: 700;\n  }\n`\n\nconst CandidatesContainer = props => {\n  const { code, year, election_forum } = props\n  const { t } = useTranslation()\n  const [imageLoadError, setImageLoadError] = useState(true)\n\n  return (\n    <Query\n      query={QUERY_GET_CANDIDATES}\n      variables={{ code, year }} // variables={{ code, year }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return null\n        if (error) return `Error! ${error}`\n\n        const candidates =\n          data.dcd_candidates &&\n          data.dcd_candidates.filter(c => c.election_type === 'ordinary')\n\n        const currentLanguage = getCurrentLanguage()\n\n        const tags = getConstituencyTagsByCandidateCamps(candidates)\n        return (\n          <>\n            {candidates.length > 0 && (\n              <>\n                <Rows>\n                  <DCCAStatusTagsContainer>\n                    {tags.length > 0 &&\n                      tags.map((tag, index) => (\n                        <StyledSecondaryTag value={tag} key={index} />\n                      ))}\n                    {election_forum &&\n                      election_forum.map((forum, index) => (\n                        <StyledTag\n                          key={index}\n                          icon={<OndemandVideoIcon />}\n                          value={t('candidateContainer.election_forum', {\n                            n: election_forum.length > 1 ? index + 1 : '',\n                          })}\n                          handleClick={() => {\n                            fireEvent({\n                              ca: 'battleground',\n                              ac: 'click',\n                              lb: 'watch_election_forum',\n                            })\n                            window.open(forum, '_blank')\n                          }}\n                        />\n                      ))}\n                  </DCCAStatusTagsContainer>\n                </Rows>\n                <Rows>\n                  <SeperatedColumns>\n                    <CandidateList container direction=\"row\">\n                      {/* Max 3 columns and always centered */}\n                      {candidates.map(candidate => (\n                        <CandidateGrid\n                          key={candidate.person.id}\n                          item\n                          xs={\n                            candidates.length < 3 ? 12 / candidates.length : 4\n                          }\n                          sm={\n                            candidates.length < 4 ? 12 / candidates.length : 3\n                          }\n                          md={\n                            candidates.length < 6 ? 12 / candidates.length : 2\n                          }\n                        >\n                          <UnstyledNavLink\n                            to={`/${currentLanguage}/profile/${candidate.person\n                              .name_zh || candidate.person.name_en}/${\n                              candidate.person.uuid\n                            }`}\n                          >\n                            <Candidate>\n                              <PeopleAvatar\n                                dimension=\"84px\"\n                                borderwidth={'4'}\n                                camp={getColorFromCamp(candidate.camp)}\n                                src={`${IMAGE_HOST_URI}/static/images/avatar/100x100/${candidate.person.uuid}.jpg`}\n                                imgProps={{\n                                  onError: e => {\n                                    // wingkwong: avoid infinite callbacks if fallback image fails\n                                    if (imageLoadError) {\n                                      setImageLoadError(false)\n                                      e.target.src =\n                                        IMAGE_HOST_URI +\n                                        '/static/images/avatar/default.png'\n                                    }\n                                  },\n                                }}\n                                opacity={\n                                  candidate.nominate_status === 'disqualified'\n                                    ? 0.4\n                                    : 1.0\n                                }\n                              />\n                              {candidate.candidate_number > 0 && (\n                                <CandidateNumber\n                                  dimension=\"18px\"\n                                  camp={getColorFromCamp(candidate.camp)}\n                                >\n                                  {candidate.candidate_number}\n                                </CandidateNumber>\n                              )}\n\n                              {year === 2019 && candidate.is_won && (\n                                <WinIndicator\n                                  dimension=\"30px\"\n                                  camp={getColorFromCamp(candidate.camp)}\n                                >\n                                  <CheckCircleOutlineIcon color=\"primary\" />\n                                </WinIndicator>\n                              )}\n                              {candidate.tags.findIndex(\n                                tag =>\n                                  tag.type === 'camp' && tag.tag === '有爭議'\n                              ) > -1 && (\n                                <ControversialAlert>\n                                  <HtmlTooltip\n                                    disableFocusListener\n                                    disableTouchListener\n                                    // text=\"侯選人政治立場未明\"\n                                    text={t('candidate.noPoliticalAffiliation')}\n                                    placement=\"bottom\"\n                                    size={21}\n                                  />\n                                </ControversialAlert>\n                              )}\n                              <CandidateName variant=\"h5\">\n                                {withLanguage(\n                                  candidate.person.name_en,\n                                  candidate.person.name_zh ||\n                                    candidate.person.name_en\n                                )}\n                              </CandidateName>\n\n                              <Typography variant=\"body2\">\n                                {withLanguage(\n                                  candidate.political_affiliation_en,\n                                  candidate.political_affiliation_zh\n                                ) || t('candidate.noPoliticalAffiliation')}\n                              </Typography>\n\n                              {candidate.nominate_status === 'disqualified' && (\n                                <Typography variant=\"body2\">\n                                  {/* 取消資格 */}\n                                  {t(\n                                    'candidate.nominateStatus.disqualified_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                              {candidate.nominate_status === 'suspended' && (\n                                <Typography variant=\"body2\">\n                                  {t(\n                                    'candidate.nominateStatus.suspended_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                              {candidate.tags.findIndex(\n                                tag =>\n                                  tag.type === 'demo_status' &&\n                                  tag.tag === 'planb'\n                              ) > -1 && (\n                                <Typography variant=\"body2\">\n                                  {t(\n                                    'candidate.nominateStatus.demo_planb_bracket'\n                                  )}\n                                </Typography>\n                              )}\n                            </Candidate>\n                          </UnstyledNavLink>\n                        </CandidateGrid>\n                      ))}\n                    </CandidateList>\n                  </SeperatedColumns>\n                </Rows>\n              </>\n            )}\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nCandidatesContainer.propsType = {\n  // cacode: PropTypes.string,\n  // year: PropTypes.number,\n}\nexport default CandidatesContainer\n","import React from 'react'\nimport { Card, Typography } from '@material-ui/core'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { SecondaryTag } from 'components/atoms/Tag'\nimport Box from '@material-ui/core/Box'\nimport Columns from 'components/atoms/Columns'\nimport {\n  getDistrictListUriFromTag,\n  getCurrentLanguage,\n  withLanguage,\n} from 'utils/helper'\nimport CandidatesContainer from 'components/containers/CandidatesContainer'\n\nconst StyledCard = styled(Card)`\n  && {\n    margin: 0 0 16px;\n    padding: 16px;\n    height: auto;\n  }\n`\n\nconst TagContainer = styled(Box)`\n  && {\n    margin-top: 6px;\n    margin-right: 8px;\n  }\n`\n\nconst ConstituencyCard = props => {\n  const { year, constituency } = props\n  const { tags } = constituency\n  const sortedTags = tags.sort((a, b) =>\n    a.type === 'boundary' ? -1 : a.type === b.type ? 0 : 1\n  )\n  const currentLanguage = getCurrentLanguage()\n\n  return (\n    <StyledCard\n      onClick={() => {\n        props.history.push(\n          `/${currentLanguage}/district/2019/${constituency.code}`\n        )\n      }}\n    >\n      <Typography variant=\"h6\" gutterBottom>\n        {withLanguage(constituency.name_en, constituency.name_zh)}（\n        {constituency.code}）\n      </Typography>\n      <Columns>\n        {sortedTags.map((tag, index) => (\n          <TagContainer>\n            <SecondaryTag\n              key={index}\n              value={tag.tag}\n              handleClick={evt => {\n                evt.stopPropagation()\n                props.history.push(getDistrictListUriFromTag(tag.tag))\n              }}\n            />\n          </TagContainer>\n        ))}\n      </Columns>\n      <CandidatesContainer year={year} code={constituency.code} />\n    </StyledCard>\n  )\n}\n\nexport default withRouter(ConstituencyCard)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Query } from 'react-apollo'\nimport { QUERY_GET_CONSTITUENCIES_BY_TAG } from 'queries/gql'\nimport ConstituencyCard from 'components/organisms/ConstituencyCard'\nimport { Typography } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport { Loading } from 'components/atoms/Loading'\n\nconst Container = styled(Paper)`\n  && {\n    width: 100%;\n    padding: 16px;\n    box-shadow: none;\n  }\n`\n\nconst DistrictListPage = props => {\n  const {\n    match: {\n      params: { year, tag },\n    },\n  } = props\n\n  return (\n    <Query\n      query={QUERY_GET_CONSTITUENCIES_BY_TAG}\n      variables={{ tag, year: 2019 }}\n    >\n      {({ loading, error, data }) => {\n        if (loading) return <Loading />\n        if (error) return `Error! ${error}`\n\n        return (\n          <>\n            <Container>\n              <Typography variant=\"h4\">{`${tag}：${data.dcd_constituencies.length}個選區`}</Typography>\n            </Container>\n            <Container>\n              {data.dcd_constituencies.map(c => (\n                <ConstituencyCard key={c.id} year={year} constituency={c} />\n              ))}\n            </Container>\n          </>\n        )\n      }}\n    </Query>\n  )\n}\n\nexport default DistrictListPage\n"],"sourceRoot":""}